"use strict";function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _get=function(t,e,a){for(var r=!0;r;){var n=t,i=e,c=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(c)}var o=Object.getPrototypeOf(n);if(null===o)return;t=o,e=i,a=c,r=!0,s=o=void 0}},_createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),Map=function(){function t(e){var a=this;_classCallCheck(this,t),this.WIDTH=e.width,this.HEIGHT=.4*e.width,this.scale=this.WIDTH/1e3,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.WIDTH,this.canvas.height=this.HEIGHT,e.container.appendChild(this.canvas),this.ctx.drawSvg("world.svg",0,0,this.WIDTH,this.HEIGHT),this.mapDate=this.ctx.getImageData(0,0,this.WIDTH,this.HEIGHT),this.container={},this.count=0,this.particles={},this.particle=function(){var t=0;return function(e,r,n,i,c,s,l,o,u){a.particles[++t]={index:t,x:e,y:r,r:n,o:i,c:c,xv:s,yv:l,rv:o,ov:u}}}()}return _createClass(t,[{key:"trigger",value:function(t,e){t=this.getXY(t),e=this.getXY(e);var a=+new Date,r="#21b384",n="#e32528",i="#F8BD19";if(!this.container[a]){var c={start:t,end:e,startColor:r,endColor:n,particleColor:i,duration:1e3,radius:70+parseInt(20*Math.random()),xv:.02*(t.x-e.x),yv:.02*(t.y-e.y)};this.container[a]=c,this.count++||this.draw()}}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.WIDTH,this.HEIGHT),this.ctx.putImageData(this.mapDate,0,0)}},{key:"draw",value:function(){var t=+new Date;this.clear();var e=!0,a=!1,r=void 0;try{for(var n,i=Object.keys(this.particles)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var c=n.value,s=this.particles[c];this.ctx.beginPath(),this.ctx.arc(s.x,s.y,s.r,0,2*Math.PI),this.ctx.globalAlpha=s.o,this.ctx.fillStyle=s.c,this.ctx.fill(),s.x+=s.xv,s.y+=s.yv,s.r+=s.rv,s.o+=s.ov,(s.r<0||s.o<0)&&delete this.particles[s.index]}}catch(l){a=!0,r=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(a)throw r}}var o=!0,u=!1,h=void 0;try{for(var p,d=Object.keys(this.container)[Symbol.iterator]();!(o=(p=d.next()).done);o=!0){var c=p.value,m=t-c,y=this.container[c];if(m<y.duration){var v=this.easeOutQuint(m,0,y.radius,y.duration),f=y.start.x+m/y.duration*(y.end.x-y.start.x),g=y.start.y+m/y.duration*(y.end.y-y.start.y),x=this.easeOutQuint(m,1,-1,y.duration);this.ctx.globalAlpha=x,this.ctx.strokeStyle=y.startColor,this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.arc(y.start.x,y.start.y,v,0,2*Math.PI),this.ctx.stroke();var w=Math.sqrt(y.xv*y.xv+y.yv*y.yv)/5;1>w&&(w=1);for(var E=Math.ceil(w),R=w/E,b=0;E>b;b++)this.particle(f-y.xv*b/E,g-y.yv*b/E,7,R,y.particleColor,.6*Math.random()-.3,.6*Math.random()-.3,-.3,-.05*R)}else if(m<2*y.duration){var v=this.easeOutQuint(m-y.duration,0,y.radius,y.duration),x=this.easeOutQuint(m-y.duration,1,-1,y.duration);this.ctx.globalAlpha=x,this.ctx.strokeStyle=y.endColor,this.ctx.lineWidth=5,this.ctx.beginPath(),this.ctx.arc(y.end.x,y.end.y,v,0,2*Math.PI),this.ctx.stroke()}else delete this.container[c],this.count--}}catch(l){u=!0,h=l}finally{try{!o&&d["return"]&&d["return"]()}finally{if(u)throw h}}this.count&&window.requestAnimationFrame(this.draw.bind(this))}},{key:"getXY",value:function(t){return{x:(2.6938*t.lon+465.4)*this.scale,y:(-2.6938*t.lat+227.066)*this.scale}}},{key:"easeOutQuint",value:function(t,e,a,r){return a*Math.sin(t/r*(Math.PI/2))+e}}]),t}(),AttackList=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"render",value:function(){var t=[],e=!0,a=!1,r=void 0;try{for(var n,i=Object.keys(this.props.list)[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var c=n.value;t.push({country:c,count:this.props.list[c]})}}catch(s){a=!0,r=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(a)throw r}}return React.createElement("table",{className:this.props.className},React.createElement("tr",null,React.createElement("th",null,"#"),React.createElement("th",null,"attackorigin"==this.props.className?"Origin":"Targets")),t.sort(function(t,e){return e.count-t.count}).slice(0,9).map(function(t){return React.createElement("tr",null,React.createElement("td",null,t.count),React.createElement("td",null,t.country))}))}}]),e}(React.Component),RealTimeList=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"render",value:function(){return React.createElement("table",{className:this.props.className},React.createElement("tbody",null,React.createElement("tr",{className:"first-head"},React.createElement("th",null,"Timestamp"),React.createElement("th",{colSpan:"3"},"Attacker"),React.createElement("th",null,"Target"),React.createElement("th",{colSpan:"2"},"Type")),React.createElement("tr",null,React.createElement("th",{width:"200px"}),React.createElement("th",{width:"280px"},"Origin"),React.createElement("th",{width:"240px"},"Location"),React.createElement("th",{width:"160px"},"IP"),React.createElement("th",{width:"200px"},"Location"),React.createElement("th",{width:"100px"},"Service"),React.createElement("th",null,"Port"))),this.props.realtime.map(function(t){return React.createElement("tr",null,React.createElement("td",null,t.Time),React.createElement("td",null,t.Origin.org),React.createElement("td",null,t.Origin.location),React.createElement("td",null,t.Origin.ip),React.createElement("td",null,t.Targets),React.createElement("td",null,t.Type.service),React.createElement("td",null,t.Type.port))}))}}]),e}(React.Component),Info=function(t){function e(){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).apply(this,arguments)}return _inherits(e,t),_createClass(e,[{key:"render",value:function(){return React.createElement("div",{className:"info"},React.createElement(AttackList,{list:this.props.origin,className:"attackorigin"}),React.createElement(AttackList,{list:this.props.targets,className:"attacktargets"}),React.createElement(RealTimeList,{realtime:this.props.realtime,className:"realtime"}))}}]),e}(React.Component),map=new Map({container:document.querySelector(".map"),width:document.body.clientWidth,worldmap:worldmap}),list=document.querySelector(".list"),origin={},targets={},realtime=[],ws=new WebSocket("ws://map.norsecorp.com/socketcluster/");ws.onopen=function(){ws.send(JSON.stringify({event:"#handshake",data:{authToken:null},cid:1})),ws.send(JSON.stringify({event:"#subscribe",data:{channel:"global"},cid:2}))},ws.onmessage=function(t){if("#1"===t.data)return void ws.send("#2");if("#publish"===JSON.parse(t.data).event){var e=JSON.parse(t.data).data.data[0],a={lat:+e.latitude,lon:+e.longitude},r={lat:+e.latitude2,lon:+e.longitude2},n=worldmap.name[e.countrycode]||"Unknow";origin[n]?origin[n]++:origin[n]=1;var i=worldmap.name[e.countrycode2]||"Unknow";targets[i]?targets[i]++:targets[i]=1,realtime.push({Time:(new Date).toLocaleString(),Origin:{org:e.org,location:e.city+","+n,ip:e.md5},Targets:i,Type:{service:e.svc,port:e.dport}}),realtime.length>8&&realtime.shift(),React.render(React.createElement(Info,{className:"info",origin:origin,targets:targets,realtime:realtime}),list),map.trigger(a,r)}},ws.onerror=function(t){alert("WebSocket发生异常，请重新刷新网页。"),console.log(t)};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyIsImluZm8uanN4IiwiYm9vdC5qcyJdLCJuYW1lcyI6WyJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJUeXBlRXJyb3IiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2dldCIsIl94IiwiX3gyIiwiX3gzIiwiX2FnYWluIiwib2JqZWN0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsIkZ1bmN0aW9uIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInVuZGVmaW5lZCIsImdldHRlciIsImdldCIsImNhbGwiLCJwYXJlbnQiLCJnZXRQcm90b3R5cGVPZiIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJNYXAiLCJvcHRpb24iLCJfdGhpcyIsInRoaXMiLCJXSURUSCIsIndpZHRoIiwiSEVJR0hUIiwic2NhbGUiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaGVpZ2h0IiwiY29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJkcmF3U3ZnIiwibWFwRGF0ZSIsImdldEltYWdlRGF0YSIsImNvdW50IiwicGFydGljbGVzIiwicGFydGljbGUiLCJuZXh0SW5kZXgiLCJ4IiwieSIsInIiLCJvIiwiYyIsInh2IiwieXYiLCJydiIsIm92IiwiaW5kZXgiLCJzdGFydCIsImVuZCIsImdldFhZIiwidGltZXN0YW1wIiwiRGF0ZSIsInN0YXJ0Q29sb3IiLCJlbmRDb2xvciIsInBhcnRpY2xlQ29sb3IiLCJpbmZvIiwiZHVyYXRpb24iLCJyYWRpdXMiLCJwYXJzZUludCIsIk1hdGgiLCJyYW5kb20iLCJkcmF3IiwiY2xlYXJSZWN0IiwicHV0SW1hZ2VEYXRhIiwibm93IiwiY2xlYXIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwia2V5cyIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJwIiwiYmVnaW5QYXRoIiwiYXJjIiwiUEkiLCJnbG9iYWxBbHBoYSIsImZpbGxTdHlsZSIsImZpbGwiLCJlcnIiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJ0aW1lIiwiZWFzZU91dFF1aW50Iiwib2Zmc2V0eCIsIm9mZnNldHkiLCJvcGFjaXR5Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2UiLCJudW1QYXJ0aWNsZXMiLCJzcXJ0IiwibnVtUGFydGljbGVzSW50IiwiY2VpbCIsIm51bVBhcnRpY2xlc0RpZiIsImoiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwibG9uIiwibGF0IiwidCIsImIiLCJkIiwic2luIiwiQXR0YWNrTGlzdCIsIl9SZWFjdCRDb21wb25lbnQiLCJhcHBseSIsImFyZ3VtZW50cyIsImNvdW50cnkiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJsaXN0IiwicHVzaCIsIlJlYWN0IiwiY2xhc3NOYW1lIiwic29ydCIsImEiLCJzbGljZSIsIm1hcCIsIml0ZW0iLCJDb21wb25lbnQiLCJSZWFsVGltZUxpc3QiLCJfUmVhY3QkQ29tcG9uZW50MiIsImNvbFNwYW4iLCJyZWFsdGltZSIsIlRpbWUiLCJPcmlnaW4iLCJvcmciLCJsb2NhdGlvbiIsImlwIiwiVGFyZ2V0cyIsIlR5cGUiLCJzZXJ2aWNlIiwicG9ydCIsIkluZm8iLCJfUmVhY3QkQ29tcG9uZW50MyIsIm9yaWdpbiIsInRhcmdldHMiLCJxdWVyeVNlbGVjdG9yIiwiYm9keSIsImNsaWVudFdpZHRoIiwid29ybGRtYXAiLCJ3cyIsIldlYlNvY2tldCIsIm9ub3BlbiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZXZlbnQiLCJkYXRhIiwiYXV0aFRva2VuIiwiY2lkIiwiY2hhbm5lbCIsIm9ubWVzc2FnZSIsImUiLCJwYXJzZSIsIm9yaUNvdW50cnkiLCJuYW1lIiwidGFyQ291bnRyeSIsInRvTG9jYWxlU3RyaW5nIiwic2hpZnQiLCJyZW5kZXIiLCJ0cmlnZ2VyIiwib25lcnJvciIsImFsZXJ0IiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFNQSxTQUFTQSxXQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUlDLFdBQVUsaUVBQW9FRCxHQUFlRCxHQUFTRyxVQUFZQyxPQUFPQyxPQUFPSixHQUFjQSxFQUFXRSxXQUFhRyxhQUFlQyxNQUFPUCxFQUFVUSxZQUFZLEVBQU9DLFVBQVUsRUFBTUMsY0FBYyxLQUFlVCxJQUFZRyxPQUFPTyxlQUFpQlAsT0FBT08sZUFBZVgsRUFBVUMsR0FBY0QsRUFBU1ksVUFBWVgsR0FFamUsUUFBU1ksaUJBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUliLFdBQVUscUNBTmhILEdBQUljLE1BQU8sU0FBYUMsRUFBSUMsRUFBS0MsR0FBcUMsSUFBOUIsR0FBSUMsSUFBUyxFQUF3QkEsR0FBUSxDQUFFLEdBQUlDLEdBQVNKLEVBQUlLLEVBQVdKLEVBQUtLLEVBQVdKLENBQUtDLElBQVMsRUFBc0IsT0FBWEMsSUFBaUJBLEVBQVNHLFNBQVNyQixVQUFXLElBQUlzQixHQUFPckIsT0FBT3NCLHlCQUF5QkwsRUFBUUMsRUFBVyxJQUFhSyxTQUFURixFQUFKLENBQTRPLEdBQUksU0FBV0EsR0FBUSxNQUFPQSxHQUFLbEIsS0FBZ0IsSUFBSXFCLEdBQVNILEVBQUtJLEdBQUssSUFBZUYsU0FBWEMsRUFBd0IsTUFBb0IsT0FBT0EsR0FBT0UsS0FBS1AsR0FBL1YsR0FBSVEsR0FBUzNCLE9BQU80QixlQUFlWCxFQUFTLElBQWUsT0FBWFUsRUFBbUIsTUFBMkJkLEdBQUtjLEVBQVFiLEVBQU1JLEVBQVVILEVBQU1JLEVBQVVILEdBQVMsRUFBTUssRUFBT00sRUFBU0osU0FFeGNNLGFBQWUsV0FBZSxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVcvQixXQUFhK0IsRUFBVy9CLGFBQWMsRUFBTytCLEVBQVc3QixjQUFlLEVBQVUsU0FBVzZCLEtBQVlBLEVBQVc5QixVQUFXLEdBQU1MLE9BQU9vQyxlQUFlTCxFQUFRSSxFQUFXRSxJQUFLRixJQUFpQixNQUFPLFVBQVV4QixFQUFhMkIsRUFBWUMsR0FBaUosTUFBOUhELElBQVlSLEVBQWlCbkIsRUFBWVosVUFBV3VDLEdBQWlCQyxHQUFhVCxFQUFpQm5CLEVBQWE0QixHQUFxQjVCLE1BSGppQjZCLElBQUEsV0FDQSxRQURBQSxHQUNBQyxHQVVRLEdBQUlDLEdBQVFDLElBRVpsQyxpQkFBZ0JrQyxLQWJ4QkgsR0FFQUcsS0FBQUMsTUFBQUgsRUFBQUksTUFDQUYsS0FBQUcsT0FBQSxHQUFBTCxFQUFBSSxNQUNBRixLQUFBSSxNQUFBSixLQUFBQyxNQUFBLElBRUFELEtBQUFLLE9BQUFDLFNBQUFDLGNBQUEsVUFDQVAsS0FBQVEsSUFBQVIsS0FBQUssT0FBQUksV0FBQSxNQUNBVCxLQUFBSyxPQUFBSCxNQUFBRixLQUFBQyxNQUNBRCxLQUFBSyxPQUFBSyxPQUFBVixLQUFBRyxPQUNBTCxFQUFBYSxVQUFBQyxZQUFBWixLQUFBSyxRQUVBTCxLQUFBUSxJQUFBSyxRQUFBLFlBQUEsRUFBQSxFQUFBYixLQUFBQyxNQUFBRCxLQUFBRyxRQUNBSCxLQUFBYyxRQUFBZCxLQUFBUSxJQUFBTyxhQUFBLEVBQUEsRUFBQWYsS0FBQUMsTUFBQUQsS0FBQUcsUUFFQUgsS0FBQVcsYUFDQVgsS0FBQWdCLE1BQUEsRUFFQWhCLEtBQUFpQixhQUNBakIsS0FBQWtCLFNBQUEsV0FDQSxHQUFBQyxHQUFBLENBQ0EsT0FBQSxVQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBN0IsRUFBQWtCLFlBQUFFLElBQ0FVLE1BQUFWLEVBQ0FDLEVBQUFBLEVBQ0FDLEVBQUFBLEVBQ0FDLEVBQUFBLEVBQ0FDLEVBQUFBLEVBQ0FDLEVBQUFBLEVBQ0FDLEdBQUFBLEVBQ0FDLEdBQUFBLEVBQ0FDLEdBQUFBLEVBQ0FDLEdBQUFBLE9BMk1JLE1BakxBMUMsY0ExREpXLElBMkRRSCxJQUFLLFVBQ0xsQyxNQWhCUixTQUFBc0UsRUFBQUMsR0FDQUQsRUFBQTlCLEtBQUFnQyxNQUFBRixHQUNBQyxFQUFBL0IsS0FBQWdDLE1BQUFELEVBQ0EsSUFBQUUsSUFBQSxHQUFBQyxNQUNBQyxFQUFBLFVBQ0FDLEVBQUEsVUFDQUMsRUFBQSxTQUNBLEtBQUFyQyxLQUFBVyxVQUFBc0IsR0FBQSxDQUNBLEdBQUFLLElBQ0FSLE1BQUFBLEVBQ0FDLElBQUFBLEVBQ0FJLFdBQUFBLEVBQ0FDLFNBQUFBLEVBQ0FDLGNBQUFBLEVBQ0FFLFNBQUEsSUFDQUMsT0FBQSxHQUFBQyxTQUFBLEdBQUFDLEtBQUFDLFVBQ0FsQixHQUFBLEtBQUFLLEVBQUFWLEVBQUFXLEVBQUFYLEdBQ0FNLEdBQUEsS0FBQUksRUFBQVQsRUFBQVUsRUFBQVYsR0FFQXJCLE1BQUFXLFVBQUFzQixHQUFBSyxFQUNBdEMsS0FBQWdCLFNBQ0FoQixLQUFBNEMsV0FvQlFsRCxJQUFLLFFBQ0xsQyxNQWpCUixXQUNBd0MsS0FBQVEsSUFBQXFDLFVBQUEsRUFBQSxFQUFBN0MsS0FBQUMsTUFBQUQsS0FBQUcsUUFDQUgsS0FBQVEsSUFBQXNDLGFBQUE5QyxLQUFBYyxRQUFBLEVBQUEsTUF5QlFwQixJQUFLLE9BQ0xsQyxNQW5CUixXQUNBLEdBQUF1RixJQUFBLEdBQUFiLEtBQ0FsQyxNQUFBZ0QsT0FzQlksSUFBSUMsSUFBNEIsRUFDNUJDLEdBQW9CLEVBQ3BCQyxFQUFpQnZFLE1BRXJCLEtBdkJaLElBQUEsR0FBQXdFLEdBQUFDLEVBQUFoRyxPQUFBaUcsS0FBQXRELEtBQUFpQixXQUFBc0MsT0FBQUMsY0FBQVAsR0FBQUcsRUFBQUMsRUFBQUksUUFBQUMsTUFBQVQsR0FBQSxFQUFBLENBeUJvQixHQXpCcEJ2RCxHQUFBMEQsRUFBQTVGLE1BQ0FtRyxFQUFBM0QsS0FBQWlCLFVBQUF2QixFQUNBTSxNQUFBUSxJQUFBb0QsWUFDQTVELEtBQUFRLElBQUFxRCxJQUFBRixFQUFBdkMsRUFBQXVDLEVBQUF0QyxFQUFBc0MsRUFBQXJDLEVBQUEsRUFBQSxFQUFBb0IsS0FBQW9CLElBQ0E5RCxLQUFBUSxJQUFBdUQsWUFBQUosRUFBQXBDLEVBQ0F2QixLQUFBUSxJQUFBd0QsVUFBQUwsRUFBQW5DLEVBQ0F4QixLQUFBUSxJQUFBeUQsT0FDQU4sRUFBQXZDLEdBQUF1QyxFQUFBbEMsR0FDQWtDLEVBQUF0QyxHQUFBc0MsRUFBQWpDLEdBQ0FpQyxFQUFBckMsR0FBQXFDLEVBQUFoQyxHQUNBZ0MsRUFBQXBDLEdBQUFvQyxFQUFBL0IsSUFDQStCLEVBQUFyQyxFQUFBLEdBQUFxQyxFQUFBcEMsRUFBQSxVQUFBdkIsTUFBQWlCLFVBQUEwQyxFQUFBOUIsUUE4QmMsTUFBT3FDLEdBQ0xoQixHQUFvQixFQUNwQkMsRUFBaUJlLEVBQ25CLFFBQ0UsS0FDU2pCLEdBQTZCSSxFQUFVLFdBQ3hDQSxFQUFVLFlBRWhCLFFBQ0UsR0FBSUgsRUFDQSxLQUFNQyxJQUtsQixHQUFJZ0IsSUFBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxFQUFrQnpGLE1BRXRCLEtBN0NaLElBQUEsR0FBQTBGLEdBQUFDLEVBQUFsSCxPQUFBaUcsS0FBQXRELEtBQUFXLFdBQUE0QyxPQUFBQyxjQUFBVyxHQUFBRyxFQUFBQyxFQUFBZCxRQUFBQyxNQUFBUyxHQUFBLEVBQUEsQ0ErQ29CLEdBL0NwQnpFLEdBQUE0RSxFQUFBOUcsTUFDQWdILEVBQUF6QixFQUFBckQsRUFDQTRDLEVBQUF0QyxLQUFBVyxVQUFBakIsRUFDQSxJQUFBOEUsRUFBQWxDLEVBQUFDLFNBQUEsQ0FDQSxHQUFBakIsR0FBQXRCLEtBQUF5RSxhQUFBRCxFQUFBLEVBQUFsQyxFQUFBRSxPQUFBRixFQUFBQyxVQUNBbUMsRUFBQXBDLEVBQUFSLE1BQUFWLEVBQUFvRCxFQUFBbEMsRUFBQUMsVUFBQUQsRUFBQVAsSUFBQVgsRUFBQWtCLEVBQUFSLE1BQUFWLEdBQ0F1RCxFQUFBckMsRUFBQVIsTUFBQVQsRUFBQW1ELEVBQUFsQyxFQUFBQyxVQUFBRCxFQUFBUCxJQUFBVixFQUFBaUIsRUFBQVIsTUFBQVQsR0FDQXVELEVBQUE1RSxLQUFBeUUsYUFBQUQsRUFBQSxFQUFBLEdBQUFsQyxFQUFBQyxTQUdBdkMsTUFBQVEsSUFBQXVELFlBQUFhLEVBQ0E1RSxLQUFBUSxJQUFBcUUsWUFBQXZDLEVBQUFILFdBQ0FuQyxLQUFBUSxJQUFBc0UsVUFBQSxFQUNBOUUsS0FBQVEsSUFBQW9ELFlBQ0E1RCxLQUFBUSxJQUFBcUQsSUFBQXZCLEVBQUFSLE1BQUFWLEVBQUFrQixFQUFBUixNQUFBVCxFQUFBQyxFQUFBLEVBQUEsRUFBQW9CLEtBQUFvQixJQUNBOUQsS0FBQVEsSUFBQXVFLFFBRUEsSUFBQUMsR0FBQXRDLEtBQUF1QyxLQUFBM0MsRUFBQWIsR0FBQWEsRUFBQWIsR0FBQWEsRUFBQVosR0FBQVksRUFBQVosSUFBQSxDQUNBLEdBQUFzRCxJQUFBQSxFQUFBLEVBR0EsS0FBQSxHQUZBRSxHQUFBeEMsS0FBQXlDLEtBQUFILEdBQ0FJLEVBQUFKLEVBQUFFLEVBQ0FHLEVBQUEsRUFBQUgsRUFBQUcsRUFBQUEsSUFDQXJGLEtBQUFrQixTQUNBd0QsRUFBQXBDLEVBQUFiLEdBQUE0RCxFQUFBSCxFQUNBUCxFQUFBckMsRUFBQVosR0FBQTJELEVBQUFILEVBQ0EsRUFDQUUsRUFDQTlDLEVBQUFELGNBQ0EsR0FBQUssS0FBQUMsU0FBQSxHQUNBLEdBQUFELEtBQUFDLFNBQUEsSUFDQSxJQUNBLElBQUF5QyxPQUdBLElBQUFaLEVBQUEsRUFBQWxDLEVBQUFDLFNBQUEsQ0FDQSxHQUFBakIsR0FBQXRCLEtBQUF5RSxhQUFBRCxFQUFBbEMsRUFBQUMsU0FBQSxFQUFBRCxFQUFBRSxPQUFBRixFQUFBQyxVQUNBcUMsRUFBQTVFLEtBQUF5RSxhQUFBRCxFQUFBbEMsRUFBQUMsU0FBQSxFQUFBLEdBQUFELEVBQUFDLFNBR0F2QyxNQUFBUSxJQUFBdUQsWUFBQWEsRUFDQTVFLEtBQUFRLElBQUFxRSxZQUFBdkMsRUFBQUYsU0FDQXBDLEtBQUFRLElBQUFzRSxVQUFBLEVBQ0E5RSxLQUFBUSxJQUFBb0QsWUFDQTVELEtBQUFRLElBQUFxRCxJQUFBdkIsRUFBQVAsSUFBQVgsRUFBQWtCLEVBQUFQLElBQUFWLEVBQUFDLEVBQUEsRUFBQSxFQUFBb0IsS0FBQW9CLElBQ0E5RCxLQUFBUSxJQUFBdUUsb0JBRUEvRSxNQUFBVyxVQUFBakIsR0FDQU0sS0FBQWdCLFNBeUNjLE1BQU9rRCxHQUNMRSxHQUFxQixFQUNyQkMsRUFBa0JILEVBQ3BCLFFBQ0UsS0FDU0MsR0FBOEJJLEVBQVcsV0FDMUNBLEVBQVcsWUFFakIsUUFDRSxHQUFJSCxFQUNBLEtBQU1DLElBL0M5QnJFLEtBQUFnQixPQUNBc0UsT0FBQUMsc0JBQUF2RixLQUFBNEMsS0FBQTRDLEtBQUF4RixVQThEUU4sSUFBSyxRQUNMbEMsTUF0RFIsU0FBQXNDLEdBQ0EsT0FDQXNCLEdBQUEsT0FBQXRCLEVBQUEyRixJQUFBLE9BQUF6RixLQUFBSSxNQUNBaUIsR0FBQSxRQUFBdkIsRUFBQTRGLElBQUEsU0FBQTFGLEtBQUFJLFVBMERRVixJQUFLLGVBVUxsQyxNQXhEUixTQUFBbUksRUFBQUMsRUFBQXBFLEVBQUFxRSxHQUNBLE1BQUFyRSxHQUFBa0IsS0FBQW9ELElBQUFILEVBQUFFLEdBQUFuRCxLQUFBb0IsR0FBQSxJQUFBOEIsTUEvS0EvRixLQ0RBa0csV0FBQSxTQUFBQyxHRGtQSSxRQ2xQSkQsS0RtUFFqSSxnQkFBZ0JrQyxLQ25QeEIrRixHRHFQUTlILEtBQUtaLE9BQU80QixlQ3JQcEI4RyxFQUFBM0ksV0FBQSxjQUFBNEMsTUFBQWlHLE1BQUFqRyxLQUFBa0csV0RnU0ksTUFoREFsSixXQ2hQSitJLEVBQUFDLEdEd1BJOUcsYUN4UEo2RyxJRHlQUXJHLElBQUssU0FDTGxDLE1DelBSLFdBQ0EsR0FBQTJJLE1EMFBnQkMsR0FBNkIsRUFDN0JDLEdBQXFCLEVBQ3JCQyxFQUFrQjFILE1BRXRCLEtDN1BaLElBQUEsR0FBQTJILEdBQUFDLEVBQUFuSixPQUFBaUcsS0FBQXRELEtBQUFYLE1BQUFvSCxNQUFBbEQsT0FBQUMsY0FBQTRDLEdBQUFHLEVBQUFDLEVBQUEvQyxRQUFBQyxNQUFBMEMsR0FBQSxFQUFBLENEK1BvQixHQy9QcEIxRyxHQUFBNkcsRUFBQS9JLEtBQ0EySSxHQUFBTyxNQUNBUCxRQUFBekcsRUFDQXNCLE1BQUFoQixLQUFBWCxNQUFBb0gsS0FBQS9HLE1EbVFjLE1BQU93RSxHQUNMbUMsR0FBcUIsRUFDckJDLEVBQWtCcEMsRUFDcEIsUUFDRSxLQUNTa0MsR0FBOEJJLEVBQVcsV0FDMUNBLEVBQVcsWUFFakIsUUFDRSxHQUFJSCxFQUNBLEtBQU1DLElDelE5QixNQUNBSyxPQUFBcEcsY0FBQSxTQUFBcUcsVUFBQTVHLEtBQUFYLE1BQUF1SCxXQUNBRCxNQUFBcEcsY0FBQSxLQUFBLEtBQ0FvRyxNQUFBcEcsY0FBQSxLQUFBLEtBQUEsS0FDQW9HLE1BQUFwRyxjQUFBLEtBQUEsS0FBQSxnQkFBQVAsS0FBQVgsTUFBQXVILFVBQUEsU0FBQSxZQUdBVCxFQUNBVSxLQUFBLFNBQUFDLEVBQUFsQixHRHVRZ0IsTUN2UWhCQSxHQUFBNUUsTUFBQThGLEVBQUE5RixRQUNBK0YsTUFBQSxFQUFBLEdBQ0FDLElBQUEsU0FBQUMsR0FDQSxNQUNBTixPQUFBcEcsY0FBQSxLQUFBLEtBQ0FvRyxNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBakcsT0FDQTJGLE1BQUFwRyxjQUFBLEtBQUEsS0FBQTBHLEVBQUFkLGlCQXhCQUosR0FBQVksTUFBQU8sV0FrQ0FDLGFBQUEsU0FBQUMsR0RvUUksUUNwUUpELEtEcVFRckosZ0JBQWdCa0MsS0NyUXhCbUgsR0R1UVFsSixLQUFLWixPQUFPNEIsZUN2UXBCa0ksRUFBQS9KLFdBQUEsY0FBQTRDLE1BQUFpRyxNQUFBakcsS0FBQWtHLFdEb1JJLE1BbEJBbEosV0NsUUptSyxFQUFBQyxHRDBRSWxJLGFDMVFKaUksSUQyUVF6SCxJQUFLLFNBQ0xsQyxNQzNRUixXQUVBLE1BQ0FtSixPQUFBcEcsY0FBQSxTQUFBcUcsVUFBQTVHLEtBQUFYLE1BQUF1SCxXQUNBRCxNQUFBcEcsY0FBQSxRQUFBLEtBQ0FvRyxNQUFBcEcsY0FBQSxNQUFBcUcsVUFBQSxjQUNBRCxNQUFBcEcsY0FBQSxLQUFBLEtBQUEsYUFDQW9HLE1BQUFwRyxjQUFBLE1BQUE4RyxRQUFBLEtBQUEsWUFDQVYsTUFBQXBHLGNBQUEsS0FBQSxLQUFBLFVBQ0FvRyxNQUFBcEcsY0FBQSxNQUFBOEcsUUFBQSxLQUFBLFNBRUFWLE1BQUFwRyxjQUFBLEtBQUEsS0FDQW9HLE1BQUFwRyxjQUFBLE1BQUFMLE1BQUEsVUFDQXlHLE1BQUFwRyxjQUFBLE1BQUFMLE1BQUEsU0FBQSxVQUNBeUcsTUFBQXBHLGNBQUEsTUFBQUwsTUFBQSxTQUFBLFlBQ0F5RyxNQUFBcEcsY0FBQSxNQUFBTCxNQUFBLFNBQUEsTUFDQXlHLE1BQUFwRyxjQUFBLE1BQUFMLE1BQUEsU0FBQSxZQUNBeUcsTUFBQXBHLGNBQUEsTUFBQUwsTUFBQSxTQUFBLFdBQ0F5RyxNQUFBcEcsY0FBQSxLQUFBLEtBQUEsVUFHQVAsS0FBQVgsTUFBQWlJLFNBQUFOLElBQUEsU0FBQUMsR0FDQSxNQUNBTixPQUFBcEcsY0FBQSxLQUFBLEtBQ0FvRyxNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBTSxNQUNBWixNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBTyxPQUFBQyxLQUNBZCxNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBTyxPQUFBRSxVQUNBZixNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBTyxPQUFBRyxJQUNBaEIsTUFBQXBHLGNBQUEsS0FBQSxLQUFBMEcsRUFBQVcsU0FDQWpCLE1BQUFwRyxjQUFBLEtBQUEsS0FBQTBHLEVBQUFZLEtBQUFDLFNBQ0FuQixNQUFBcEcsY0FBQSxLQUFBLEtBQUEwRyxFQUFBWSxLQUFBRSxjQS9CQVosR0FBQVIsTUFBQU8sV0F3Q0FjLEtBQUEsU0FBQUMsR0RrUEksUUNsUEpELEtEbVBRbEssZ0JBQWdCa0MsS0NuUHhCZ0ksR0RxUFEvSixLQUFLWixPQUFPNEIsZUNyUHBCK0ksRUFBQTVLLFdBQUEsY0FBQTRDLE1BQUFpRyxNQUFBakcsS0FBQWtHLFdEK1BJLE1BZkFsSixXQ2hQSmdMLEVBQUFDLEdEd1BJL0ksYUN4UEo4SSxJRHlQUXRJLElBQUssU0FDTGxDLE1DelBSLFdBQ0EsTUFDQW1KLE9BQUFwRyxjQUFBLE9BQUFxRyxVQUFBLFFBQ0FELE1BQUFwRyxjQUFBd0YsWUFBQVUsS0FBQXpHLEtBQUFYLE1BQUE2SSxPQUFBdEIsVUFBQSxpQkFDQUQsTUFBQXBHLGNBQUF3RixZQUFBVSxLQUFBekcsS0FBQVgsTUFBQThJLFFBQUF2QixVQUFBLGtCQUNBRCxNQUFBcEcsY0FBQTRHLGNBQUFHLFNBQUF0SCxLQUFBWCxNQUFBaUksU0FBQVYsVUFBQSxrQkFOQW9CLEdBQUFyQixNQUFBTyxXQ3hFQUYsSUFBQSxHQUFBbkgsTUFDQWMsVUFBQUwsU0FBQThILGNBQUEsUUFDQWxJLE1BQUFJLFNBQUErSCxLQUFBQyxZQUNBQyxTQUFBQSxXQUdBOUIsS0FBQW5HLFNBQUE4SCxjQUFBLFNBRUFGLFVBQ0FDLFdBQ0FiLFlBRUFrQixHQUFBLEdBQUFDLFdBQUEsd0NBRUFELElBQUFFLE9BQUEsV0FDQUYsR0FBQUcsS0FBQUMsS0FBQUMsV0FBQUMsTUFBQSxhQUFBQyxNQUFBQyxVQUFBLE1BQUFDLElBQUEsS0FDQVQsR0FBQUcsS0FBQUMsS0FBQUMsV0FBQUMsTUFBQSxhQUFBQyxNQUFBRyxRQUFBLFVBQUFELElBQUEsTUFHQVQsR0FBQVcsVUFBQSxTQUFBQyxHQUNBLEdBQUEsT0FBQUEsRUFBQUwsS0FFQSxXQURBUCxJQUFBRyxLQUFBLEtBRUEsSUFBQSxhQUFBQyxLQUFBUyxNQUFBRCxFQUFBTCxNQUFBRCxNQUFBLENBSUEsR0FBQUMsR0FBQUgsS0FBQVMsTUFBQUQsRUFBQUwsTUFBQUEsS0FBQUEsS0FBQSxHQUNBakgsR0FDQTRELEtBQUFxRCxFQUFBLFNBQ0F0RCxLQUFBc0QsRUFBQSxXQUVBaEgsR0FDQTJELEtBQUFxRCxFQUFBLFVBQ0F0RCxLQUFBc0QsRUFBQSxZQUVBTyxFQUFBZixTQUFBZ0IsS0FBQVIsRUFBQSxjQUFBLFFBQ0FiLFFBQUFvQixHQUFBcEIsT0FBQW9CLEtBQUFwQixPQUFBb0IsR0FBQSxDQUNBLElBQUFFLEdBQUFqQixTQUFBZ0IsS0FBQVIsRUFBQSxlQUFBLFFBQ0FaLFNBQUFxQixHQUFBckIsUUFBQXFCLEtBQUFyQixRQUFBcUIsR0FBQSxFQUVBbEMsU0FBQVosTUFDQWEsTUFBQSxHQUFBckYsT0FBQXVILGlCQUNBakMsUUFDQUMsSUFBQXNCLEVBQUEsSUFDQXJCLFNBQUFxQixFQUFBLEtBQUEsSUFBQU8sRUFDQTNCLEdBQUFvQixFQUFBLEtBRUFuQixRQUFBNEIsRUFDQTNCLE1BQ0FDLFFBQUFpQixFQUFBLElBQ0FoQixLQUFBZ0IsRUFBQSxTQUlBekIsU0FBQS9ILE9BQUEsR0FDQStILFNBQUFvQyxRQUdBL0MsTUFBQWdELE9BQ0FoRCxNQUFBcEcsY0FBQXlILE1BQUFwQixVQUFBLE9BQUFzQixPQUFBQSxPQUFBQyxRQUFBQSxRQUFBYixTQUFBQSxXQUNBYixNQUVBTyxJQUFBNEMsUUFBQTlILEVBQUFDLEtBR0F5RyxHQUFBcUIsUUFBQSxTQUFBVCxHQUNBVSxNQUFBLDBCQUNBQyxRQUFBQyxJQUFBWiIsImZpbGUiOiJtYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNsYXNzIE1hcCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb24pIHtcclxuICAgICAgICB0aGlzLldJRFRIID0gb3B0aW9uLndpZHRoO1xyXG4gICAgICAgIHRoaXMuSEVJR0hUID0gb3B0aW9uLndpZHRoICogMC40O1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLldJRFRIIC8gMTAwMDtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLldJRFRIO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHRoaXMuSEVJR0hUO1xyXG4gICAgICAgIG9wdGlvbi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpO1xyXG5cclxuICAgICAgICB0aGlzLmN0eC5kcmF3U3ZnKCd3b3JsZC5zdmcnLCAwLCAwLCB0aGlzLldJRFRILCB0aGlzLkhFSUdIVCk7XHJcbiAgICAgICAgdGhpcy5tYXBEYXRlID0gdGhpcy5jdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuV0lEVEgsdGhpcy5IRUlHSFQpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHt9O1xyXG4gICAgICAgIHRoaXMuY291bnQgPSAwOy8vIHF1ZXVl5oC75pWwXHJcblxyXG4gICAgICAgIHRoaXMucGFydGljbGVzID0ge31cclxuICAgICAgICB0aGlzLnBhcnRpY2xlID0gKCgpID0+IHtcclxuICAgICAgICAgIGxldCBuZXh0SW5kZXggPSAwO1xyXG4gICAgICAgICAgcmV0dXJuICh4LHkscixvLGMseHYseXYscnYsb3YpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZXNbKytuZXh0SW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgIGluZGV4OiBuZXh0SW5kZXgsXHJcbiAgICAgICAgICAgICAgeDogeCxcclxuICAgICAgICAgICAgICB5OiB5LFxyXG4gICAgICAgICAgICAgIHI6IHIsXHJcbiAgICAgICAgICAgICAgbzogbyxcclxuICAgICAgICAgICAgICBjOiBjLFxyXG4gICAgICAgICAgICAgIHh2OiB4dixcclxuICAgICAgICAgICAgICB5djogeXYsXHJcbiAgICAgICAgICAgICAgcnY6IHJ2LFxyXG4gICAgICAgICAgICAgIG92OiBvdlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kem5Y+R5Yqo55S7XHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHN0YXJ0XHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGVuZFxyXG4gICAgICogQHJldHVybiB7bnVsbH1cclxuICAgICAqL1xyXG4gICAgdHJpZ2dlcihzdGFydCwgZW5kKSB7XHJcbiAgICAgICAgc3RhcnQgPSB0aGlzLmdldFhZKHN0YXJ0KTtcclxuICAgICAgICBlbmQgPSB0aGlzLmdldFhZKGVuZCk7XHJcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gK25ldyBEYXRlLFxyXG4gICAgICAgICAgICAgIHN0YXJ0Q29sb3IgPSAnIzIxYjM4NCcsXHJcbiAgICAgICAgICAgICAgZW5kQ29sb3IgPSAnI2UzMjUyOCcsXHJcbiAgICAgICAgICAgICAgcGFydGljbGVDb2xvciA9ICcjRjhCRDE5JztcclxuICAgICAgICBpZih0aGlzLmNvbnRhaW5lclt0aW1lc3RhbXBdKSByZXR1cm47XHJcbiAgICAgICAgbGV0IGluZm8gPSB7XHJcbiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcclxuICAgICAgICAgICAgZW5kOiBlbmQsXHJcbiAgICAgICAgICAgIHN0YXJ0Q29sb3I6IHN0YXJ0Q29sb3IsXHJcbiAgICAgICAgICAgIGVuZENvbG9yOiBlbmRDb2xvcixcclxuICAgICAgICAgICAgcGFydGljbGVDb2xvcjogcGFydGljbGVDb2xvcixcclxuICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIHJhZGl1czogNzAgKyBwYXJzZUludChNYXRoLnJhbmRvbSgpICogMjApLFxyXG4gICAgICAgICAgICB4djogKHN0YXJ0LnggLSBlbmQueCkgKiAwLjAyLFxyXG4gICAgICAgICAgICB5djogKHN0YXJ0LnkgLSBlbmQueSkgKiAwLjAyXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyW3RpbWVzdGFtcF0gPSBpbmZvO1xyXG4gICAgICAgIGlmKCEodGhpcy5jb3VudCkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsMCx0aGlzLldJRFRILHRoaXMuSEVJR0hUKTtcclxuICAgICAgICB0aGlzLmN0eC5wdXRJbWFnZURhdGEodGhpcy5tYXBEYXRlLCAwLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOa4suafk1xyXG4gICAgICogQHJldHVybiB7bnVsbH1cclxuICAgICAqL1xyXG4gICAgZHJhdygpIHtcclxuICAgICAgICBjb25zdCBub3cgPSArbmV3IERhdGU7XHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG5cclxuICAgICAgICAvLyBwYXJ0aWNsZXNcclxuICAgICAgICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLnBhcnRpY2xlcykpIHtcclxuICAgICAgICAgICAgbGV0IHAgPSB0aGlzLnBhcnRpY2xlc1trZXldO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jdHguYXJjKHAueCwgcC55LCBwLnIsIDAsIE1hdGguUEkqMik7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gcC5vO1xyXG4gICAgICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBwLmM7XHJcbiAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcclxuICAgICAgICAgICAgcC54ICs9IHAueHY7XHJcbiAgICAgICAgICAgIHAueSArPSBwLnl2O1xyXG4gICAgICAgICAgICBwLnIgKz0gcC5ydjtcclxuICAgICAgICAgICAgcC5vICs9IHAub3Y7XHJcbiAgICAgICAgICAgIGlmKHAuciA8IDAgfHwgcC5vIDwgMCkgZGVsZXRlIHRoaXMucGFydGljbGVzW3AuaW5kZXhdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZmlyZWJhbGxzIGFuZCBjaXJjbGVcclxuICAgICAgICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmNvbnRhaW5lcikpIHtcclxuICAgICAgICAgICAgY29uc3QgdGltZSA9IG5vdyAtIGtleTtcclxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuY29udGFpbmVyW2tleV07XHJcbiAgICAgICAgICAgIGlmKHRpbWUgPCBpbmZvLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5lYXNlT3V0UXVpbnQodGltZSwgMCwgaW5mby5yYWRpdXMsIGluZm8uZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0eCA9IGluZm8uc3RhcnQueCArIHRpbWUgLyBpbmZvLmR1cmF0aW9uICogKGluZm8uZW5kLnggLSBpbmZvLnN0YXJ0LngpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2V0eSA9IGluZm8uc3RhcnQueSArIHRpbWUgLyBpbmZvLmR1cmF0aW9uICogKGluZm8uZW5kLnkgLSBpbmZvLnN0YXJ0LnkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eSA9IHRoaXMuZWFzZU91dFF1aW50KHRpbWUsIDEsIC0xLCBpbmZvLmR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaXJjbGVcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gaW5mby5zdGFydENvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gNTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKGluZm8uc3RhcnQueCwgaW5mby5zdGFydC55LCByLCAwLCAyKk1hdGguUEkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IG51bVBhcnRpY2xlcyA9IE1hdGguc3FydChpbmZvLnh2KmluZm8ueHYgKyBpbmZvLnl2KmluZm8ueXYpIC8gNTtcclxuICAgICAgICAgICAgICAgIGlmKG51bVBhcnRpY2xlcyA8IDEpIG51bVBhcnRpY2xlcyA9IDE7XHJcbiAgICAgICAgICAgICAgICBsZXQgbnVtUGFydGljbGVzSW50ID0gTWF0aC5jZWlsKG51bVBhcnRpY2xlcyksXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtUGFydGljbGVzRGlmID0gbnVtUGFydGljbGVzIC8gbnVtUGFydGljbGVzSW50O1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqID0gMDsgaiA8IG51bVBhcnRpY2xlc0ludDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGFydGljbGUoXHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0eC1pbmZvLnh2KmovbnVtUGFydGljbGVzSW50LFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldHktaW5mby55dipqL251bVBhcnRpY2xlc0ludCxcclxuICAgICAgICAgICAgICAgICAgICA3LFxyXG4gICAgICAgICAgICAgICAgICAgIG51bVBhcnRpY2xlc0RpZixcclxuICAgICAgICAgICAgICAgICAgICBpbmZvLnBhcnRpY2xlQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5yYW5kb20oKSowLjYtMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucmFuZG9tKCkqMC42LTAuMyxcclxuICAgICAgICAgICAgICAgICAgICAtMC4zLFxyXG4gICAgICAgICAgICAgICAgICAgIC0wLjA1Km51bVBhcnRpY2xlc0RpZlxyXG4gICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYodGltZSA8IGluZm8uZHVyYXRpb24gKiAyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5lYXNlT3V0UXVpbnQodGltZSAtIGluZm8uZHVyYXRpb24sIDAsIGluZm8ucmFkaXVzLCBpbmZvLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wYWNpdHkgPSB0aGlzLmVhc2VPdXRRdWludCh0aW1lIC0gaW5mby5kdXJhdGlvbiwgMSwgLTEsIGluZm8uZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguZ2xvYmFsQWxwaGEgPSBvcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBpbmZvLmVuZENvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gNTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKGluZm8uZW5kLngsIGluZm8uZW5kLnksIHIsIDAsIDIqTWF0aC5QSSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbnRhaW5lcltrZXldO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudC0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLmNvdW50KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5kcmF3LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOe7j+e6rOW6piB0byBYWVxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25cclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0WFkgKG9wdGlvbikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHg6IChvcHRpb24ubG9uICogMi42OTM4ICsgNDY1LjQpICogdGhpcy5zY2FsZSxcclxuICAgICAgICAgICAgeTogKG9wdGlvbi5sYXQgKiAtMi42OTM4ICsgMjI3LjA2NikgKiB0aGlzLnNjYWxlXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnvJPliqjlh73mlbBcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gdCDlh4bnoa7ml7bpl7RcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gYiDlvIDlp4vlgLxcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gYyDmlLnlj5jlgLxcclxuICAgICAqIEBwYXJhbSAge051bWJlcn0gZCDmgLvml7bpl7RcclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gICB2YWx1ZVxyXG4gICAgICovXHJcbiAgICAgZWFzZU91dFF1aW50ICh0LCBiLCBjLCBkKSB7XHJcbiBcdFx0cmV0dXJuIGMgKiBNYXRoLnNpbih0L2QgKiAoTWF0aC5QSS8yKSkgKyBiO1xyXG4gXHR9XHJcbn1cclxuIiwiY2xhc3MgQXR0YWNrTGlzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgbGV0IGNvdW50cnkgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLnByb3BzLmxpc3QpKSB7XHJcbiAgICAgICAgICAgIGNvdW50cnkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3VudHJ5OiBrZXksXHJcbiAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5wcm9wcy5saXN0W2tleV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3NOYW1lPXsgdGhpcy5wcm9wcy5jbGFzc05hbWUgfT5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgPHRoPiM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICA8dGg+eyB0aGlzLnByb3BzLmNsYXNzTmFtZSA9PSAnYXR0YWNrb3JpZ2luJyA/ICdPcmlnaW4nIDogJ1RhcmdldHMnIH08L3RoPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmNvdW50IC0gYS5jb3VudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgaXRlbS5jb3VudCB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57IGl0ZW0uY291bnRyeSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC90YWJsZT5cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBSZWFsVGltZUxpc3QgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xyXG4gICAgcmVuZGVyICgpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPHRhYmxlIGNsYXNzTmFtZT17IHRoaXMucHJvcHMuY2xhc3NOYW1lIH0+XHJcbiAgICAgICAgICAgICAgICA8dGJvZHk+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRyIGNsYXNzTmFtZT1cImZpcnN0LWhlYWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0aD5UaW1lc3RhbXA8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRoIGNvbFNwYW49XCIzXCI+QXR0YWNrZXI8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRoPlRhcmdldDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGggY29sU3Bhbj1cIjJcIj5UeXBlPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0aCB3aWR0aD1cIjIwMHB4XCI+PC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0aCB3aWR0aD1cIjI4MHB4XCI+T3JpZ2luPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0aCB3aWR0aD1cIjI0MHB4XCI+TG9jYXRpb248L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPHRoIHdpZHRoPVwiMTYwcHhcIj5JUDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGggd2lkdGg9XCIyMDBweFwiPkxvY2F0aW9uPC90aD5cclxuICAgICAgICAgICAgICAgICAgICAgIDx0aCB3aWR0aD1cIjEwMHB4XCI+U2VydmljZTwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGg+UG9ydDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgICAgIDwvdGJvZHk+XHJcbiAgICAgICAgICAgICAgICB7IHRoaXMucHJvcHMucmVhbHRpbWUubWFwKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57IGl0ZW0uVGltZSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQ+eyBpdGVtLk9yaWdpbi5vcmcgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgaXRlbS5PcmlnaW4ubG9jYXRpb24gfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgaXRlbS5PcmlnaW4uaXAgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPnsgaXRlbS5UYXJnZXRzIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57IGl0ZW0uVHlwZS5zZXJ2aWNlIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57IGl0ZW0uVHlwZS5wb3J0IH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KSB9XHJcbiAgICAgICAgICAgIDwvdGFibGU+XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgSW5mbyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbmZvXCI+XHJcbiAgICAgICAgICAgICAgICA8QXR0YWNrTGlzdCBsaXN0PXsgdGhpcy5wcm9wcy5vcmlnaW4gfSBjbGFzc05hbWU9XCJhdHRhY2tvcmlnaW5cIiAvPlxyXG4gICAgICAgICAgICAgICAgPEF0dGFja0xpc3QgbGlzdD17IHRoaXMucHJvcHMudGFyZ2V0cyB9IGNsYXNzTmFtZT1cImF0dGFja3RhcmdldHNcIiAvPlxyXG4gICAgICAgICAgICAgICAgPFJlYWxUaW1lTGlzdCByZWFsdGltZT17IHRoaXMucHJvcHMucmVhbHRpbWUgfSBjbGFzc05hbWU9XCJyZWFsdGltZVwiIC8+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnXHJcblxyXG5sZXQgbWFwID0gbmV3IE1hcCh7XHJcbiAgICBjb250YWluZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYXAnKSxcclxuICAgIHdpZHRoOiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLFxyXG4gICAgd29ybGRtYXA6IHdvcmxkbWFwXHJcbn0pXHJcblxyXG5sZXQgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5saXN0JylcclxuXHJcbmxldCBvcmlnaW4gPSB7fVxyXG5sZXQgdGFyZ2V0cyA9IHt9XHJcbmxldCByZWFsdGltZSA9IFtdXHJcblxyXG5sZXQgd3MgPSBuZXcgV2ViU29ja2V0KCd3czovL21hcC5ub3JzZWNvcnAuY29tL3NvY2tldGNsdXN0ZXIvJylcclxuXHJcbndzLm9ub3BlbiA9ICgpID0+IHtcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1wiZXZlbnRcIjpcIiNoYW5kc2hha2VcIixcImRhdGFcIjp7XCJhdXRoVG9rZW5cIjpudWxsfSxcImNpZFwiOjF9KSlcclxuICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe1wiZXZlbnRcIjpcIiNzdWJzY3JpYmVcIixcImRhdGFcIjp7XCJjaGFubmVsXCI6XCJnbG9iYWxcIn0sXCJjaWRcIjoyfSkpXHJcbn1cclxuXHJcbndzLm9ubWVzc2FnZSA9IChlKSA9PiB7XHJcbiAgICBpZiAoZS5kYXRhID09PSAnIzEnKSB7XHJcbiAgICAgICAgd3Muc2VuZCgnIzInKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfSBlbHNlIGlmIChKU09OLnBhcnNlKGUuZGF0YSkuZXZlbnQgIT09ICcjcHVibGlzaCcpIHtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGEpLmRhdGEuZGF0YVswXVxyXG4gICAgY29uc3Qgc3RhcnQgPSB7XHJcbiAgICAgICAgbGF0OiArZGF0YVsnbGF0aXR1ZGUnXSxcclxuICAgICAgICBsb246ICtkYXRhWydsb25naXR1ZGUnXVxyXG4gICAgfVxyXG4gICAgY29uc3QgZW5kID0ge1xyXG4gICAgICAgIGxhdDogK2RhdGFbJ2xhdGl0dWRlMiddLFxyXG4gICAgICAgIGxvbjogK2RhdGFbJ2xvbmdpdHVkZTInXVxyXG4gICAgfVxyXG4gICAgY29uc3Qgb3JpQ291bnRyeSA9IHdvcmxkbWFwLm5hbWVbZGF0YVsnY291bnRyeWNvZGUnXV0gfHwgJ1Vua25vdydcclxuICAgIG9yaWdpbltvcmlDb3VudHJ5XSA/IG9yaWdpbltvcmlDb3VudHJ5XSsrIDogb3JpZ2luW29yaUNvdW50cnldID0gMVxyXG4gICAgY29uc3QgdGFyQ291bnRyeSA9IHdvcmxkbWFwLm5hbWVbZGF0YVsnY291bnRyeWNvZGUyJ11dIHx8ICdVbmtub3cnXHJcbiAgICB0YXJnZXRzW3RhckNvdW50cnldID8gdGFyZ2V0c1t0YXJDb3VudHJ5XSsrIDogdGFyZ2V0c1t0YXJDb3VudHJ5XSA9IDFcclxuXHJcbiAgICByZWFsdGltZS5wdXNoKHtcclxuICAgICAgICBUaW1lOiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCksXHJcbiAgICAgICAgT3JpZ2luOiB7XHJcbiAgICAgICAgICAgIG9yZzogZGF0YVsnb3JnJ10sXHJcbiAgICAgICAgICAgIGxvY2F0aW9uOiBkYXRhWydjaXR5J10gKyAnLCcgKyBvcmlDb3VudHJ5LFxyXG4gICAgICAgICAgICBpcDogZGF0YVsnbWQ1J11cclxuICAgICAgICB9LFxyXG4gICAgICAgIFRhcmdldHM6IHRhckNvdW50cnksXHJcbiAgICAgICAgVHlwZToge1xyXG4gICAgICAgICAgICBzZXJ2aWNlOiBkYXRhWydzdmMnXSxcclxuICAgICAgICAgICAgcG9ydDogZGF0YVsnZHBvcnQnXVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgaWYocmVhbHRpbWUubGVuZ3RoID4gOCkge1xyXG4gICAgICAgIHJlYWx0aW1lLnNoaWZ0KClcclxuICAgIH1cclxuXHJcbiAgICBSZWFjdC5yZW5kZXIoXHJcbiAgICAgICAgPEluZm8gY2xhc3NOYW1lPVwiaW5mb1wiIG9yaWdpbj17IG9yaWdpbiB9IHRhcmdldHM9eyB0YXJnZXRzIH0gcmVhbHRpbWU9eyByZWFsdGltZSB9IC8+LFxyXG4gICAgICAgIGxpc3QpXHJcblxyXG4gICAgbWFwLnRyaWdnZXIoc3RhcnQsIGVuZClcclxufVxyXG5cclxud3Mub25lcnJvciA9IChlKSA9PiB7XHJcbiAgICBhbGVydCgnV2ViU29ja2V05Y+R55Sf5byC5bi477yM6K+36YeN5paw5Yi35paw572R6aG144CCJylcclxuICAgIGNvbnNvbGUubG9nKGUpXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
